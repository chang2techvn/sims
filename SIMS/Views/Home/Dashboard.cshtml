@{
    ViewData["Title"] = "Dashboard";
}

<!-- Dashboard Header -->
<div class="dashboard-header">
    <div class="header-content">
        <h1 class="dashboard-subtitle">Welcome back, @ViewBag.UserName! Here's what's happening with your system today.</h1>
    </div>
    <div class="header-actions">
        <div class="current-date d-none d-md-block">
            <i class="fas fa-calendar"></i>
            @DateTime.Now.ToString("dddd, MMMM dd, yyyy")
        </div>
    </div>
</div>

@if (ViewBag.UserRole == "admin")
{
    <!-- Statistics Cards -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-content">
                <div class="stat-info">
                    <div class="stat-label">Total Students</div>
                    <div class="stat-value">@ViewBag.TotalStudents</div>
                    <div class="stat-change">
                        <i class="fas fa-arrow-up"></i>
                        Active learners
                    </div>
                </div>
                <div class="stat-icon">
                    <i class="fas fa-user-graduate"></i>
                </div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-content">
                <div class="stat-info">
                    <div class="stat-label">Total Courses</div>
                    <div class="stat-value">@ViewBag.TotalCourses</div>
                    <div class="stat-change">
                        <i class="fas fa-arrow-up"></i>
                        Available courses
                    </div>
                </div>
                <div class="stat-icon">
                    <i class="fas fa-book-open"></i>
                </div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-content">
                <div class="stat-info">
                    <div class="stat-label">Total Lecturers</div>
                    <div class="stat-value">@ViewBag.TotalLecturers</div>
                    <div class="stat-change">
                        <i class="fas fa-arrow-up"></i>
                        Expert faculty
                    </div>
                </div>
                <div class="stat-icon">
                    <i class="fas fa-chalkboard-teacher"></i>
                </div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-content">
                <div class="stat-info">
                    <div class="stat-label">Total Users</div>
                    <div class="stat-value">@ViewBag.TotalUsers</div>
                    <div class="stat-change">
                        <i class="fas fa-users"></i>
                        System users
                    </div>
                </div>
                <div class="stat-icon">
                    <i class="fas fa-users"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content Grid -->
    <div class="dashboard-grid">
        <!-- Quick Actions -->
        <div class="dashboard-card">
            <div class="card-header">
                <h3 class="card-title">
                    <i class="fas fa-bolt"></i>
                    Quick Actions
                </h3>
                <p class="card-subtitle">Access frequently used features</p>
            </div>
            <div class="card-body">
                <div class="quick-actions-grid">
                    <a href="@Url.Action("ManageCourses", "Admin")" class="action-card">
                        <div class="action-icon">
                            <i class="fas fa-book"></i>
                        </div>
                        <div class="action-content">
                            <h4>Manage Courses</h4>
                            <p>Create and organize course offerings</p>
                        </div>
                        <div class="action-arrow">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </a>

                    <a href="@Url.Action("ManageUsers", "Admin")" class="action-card">
                        <div class="action-icon">
                            <i class="fas fa-users-cog"></i>
                        </div>
                        <div class="action-content">
                            <h4>Manage Users</h4>
                            <p>Handle students, lecturers, and admins</p>
                        </div>
                        <div class="action-arrow">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </a>

                    <a href="@Url.Action("AssignStudentToCourse", "Admin")" class="action-card">
                        <div class="action-icon">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <div class="action-content">
                            <h4>Assign Students</h4>
                            <p>Enroll students in courses</p>
                        </div>
                        <div class="action-arrow">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </a>

                    <a href="@Url.Action("ManageDepartments", "Admin")" class="action-card">
                        <div class="action-icon">
                            <i class="fas fa-building"></i>
                        </div>
                        <div class="action-content">
                            <h4>Manage Departments</h4>
                            <p>Configure academic departments</p>
                        </div>
                        <div class="action-arrow">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </a>

                    <a href="@Url.Action("ManageMajors", "Admin")" class="action-card">
                        <div class="action-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <div class="action-content">
                            <h4>Manage Majors</h4>
                            <p>Set up academic majors</p>
                        </div>
                        <div class="action-arrow">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </a>

                    <a href="@Url.Action("ManageSubjects", "Admin")" class="action-card">
                        <div class="action-icon">
                            <i class="fas fa-book-reader"></i>
                        </div>
                        <div class="action-content">
                            <h4>Manage Subjects</h4>
                            <p>Define course subjects</p>
                        </div>
                        <div class="action-arrow">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </a>
                </div>
            </div>
        </div>

        <!-- Activity Log -->
        <div class="dashboard-card">
            <div class="card-header">
                <h3 class="card-title">
                    <i class="fas fa-history"></i>
                    Recent Enrollments
                </h3>
                <p class="card-subtitle">Latest student course enrollments</p>
            </div>
            <div class="card-body">
                @if (ViewBag.RecentEnrollments != null && ViewBag.RecentEnrollments.Count > 0)
                {
                    <div class="activity-list">
                        @foreach (var enrollment in ((IEnumerable<dynamic>)ViewBag.RecentEnrollments))
                        {
                            <div class="activity-item">
                                <div class="activity-icon">
                                    <i class="fas fa-user-plus"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-text">
                                        <strong>@enrollment.StudentName</strong> enrolled in <strong>@enrollment.CourseName</strong>
                                    </div>
                                    <div class="activity-time">
                                        <i class="fas fa-clock"></i>
                                        @enrollment.EnrollmentDate.ToString("MMM dd, yyyy HH:mm")
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                }
                else
                {
                    <div class="empty-state">
                        <div class="empty-icon">
                            <i class="fas fa-inbox"></i>
                        </div>
                        <h4>No Recent Enrollments</h4>
                        <p>Student enrollments will appear here as they happen.</p>
                    </div>
                }
            </div>
        </div>
    </div>
}
else
{
    <!-- Non-admin dashboard content -->
    <div class="dashboard-placeholder">
        <div class="placeholder-content">
            <i class="fas fa-user"></i>
            <h2>Welcome to SIMS</h2>
            <p>Your personalized dashboard is being prepared. Please contact an administrator if you need access to additional features.</p>
        </div>
    </div>
}